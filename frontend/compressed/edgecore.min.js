/*! edgecore 12-08-2021 */

URL_CREATE_USER="api/unsecured/core/createUser",URL_CREATE_ADMIN="api/secured/core/createAdmin",URL_RESET_PASSWORD="api/unsecured/core/resetPassword",URL_LOGIN_USER="api/unsecured/core/getLoggedInUser",URL_LOGIN_ROLE="api/secured/core/getLoggedInRole",URL_AUTH_FAILED="api/unsecured/core/authFailed",URL_VERIFICATION_CODE="api/unsecured/core/sendVerificationCode";var resetPassword=function(t,e){startAjax("FORGOT_PWD_POP_UP",t),e.post(URL_RESET_PASSWORD,t.es.signInForm).success(function(e,s,n,o){handleAjaxSuccess("FORGOT_PWD_POP_UP",t,e,s,n,o),e&&e.success?(t.es.otpFailure="",t.es.closePopup("FORGOT_PWD_POP_UP")):t.es.otpFailure=e.responseData}).error(function(e,s,n,o){handleAjaxError("FORGOT_PWD_POP_UP",t,e,s,n,o),t.es.closePopup("FORGOT_PWD_POP_UP")})},signUp=function(t,e){t.es.closePopup("SIGN_UP_POP_UP"),startAjax("SIGN_UP_POP_UP",t),e.post(URL_CREATE_USER,t.es.signUpForm).success(function(e,s,n,o){handleAjaxSuccess("SIGN_UP_POP_UP",t,e,s,n,o)}).error(function(e,s,n,o){handleAjaxError("SIGN_UP_POP_UP",t,e,s,n,o)})},digits=/^[0-9]+$/;edgeApp.filter("checkmark",function(){return function(e){return e?"✓":"✘"}}),edgeApp.filter("ageFilter",function(){return function(e){e=new Date(e);e=(new Date-e)/315576e5;return e=Math.floor(e)}}),edgeApp.filter("min2digit",function(){return function(e){return min2digitFun(e)}}),edgeApp.directive("sButton",function(){return{scope:{text:"@",inprogress:"="},templateUrl:"modules/templates/special_button.html"}});var min2digitFun=function(e){return e<10?"0"+e:""+e},coreOnLoad=function(e,s,n,o,t,r,i){"loginFailure"==e.es.pageID&&e.es.openPopup("SIGN_IN_POP_UP"),e.es.getLoggedInUser(),e.es.pageRedirection=e.es.location.search().pageRedirection,e.es.pageRedirection?e.es.setSelectedView(e.es.pageRedirection):e.es.searchTYPE?e.es.setQuickSearchMenu(e.es.searchTYPE):(e.es.pageID||(e.es.pageID="homeView"),e.es.setSelectedInternal(e.es.pageID)),e.es.showMessage=e.es.location.search().showMessage,e.es.showMessage&&(e.es.messageType=e.es.location.search().messageType,e.es.addAlertNative(e.es.messageType,e.es.showMessage,null,null))};function coreInitFun(i,s,n,e,o,t,r){i.es.addAlertBasic=function(e){i.es.alertDetails=edgeResponse,i.es.openPopup("ALERT_POPUP")},i.es.addAlertNative=function(e,s,n,o){i.es.alerts.push({type:e,header:s,messages:n,errorHtml:o})},i.es.addAlert=function(e){e.header?(i.es.closeable=!1,i.es.alertDetails=e,i.es.openPopup("ALERT_POPUP")):e.error&&i.es.alerts.push({type:"danger",header:e.message,messages:null,errors:null,footer:null})},i.closeAlert=function(e){i.es.alerts.splice(e,1)},i.es.loadMenuPage=function(e){window.open(e,"_self","",!1)},i.es.setSelectedView=function(e){var s="#/page/"+e;window.location.href.includes(s)?i.es.setSelectedInternal(e):window.open(s,"_self","",!1)},i.es.setSelectedInternal=function(e){i.es.selectedPage=i.es.extendedMenuMap[e]},i.es.isSelectedMenu=function(e){return i.es.selectedPage.id===e.id},i.es.w3_open=function(){i.es.showNavBar=!0},i.es.w3_close=function(){i.es.showNavBar=!1},i.es.openPopup=function(e){i.es.closePopup(e);var s=i.es.popupMap[e];n.open({templateUrl:s.templateUrl,size:s.size,controller:"PopupInstanceCtrl",resolve:{es:function(){return i.es},popupId:function(){return e}}})},i.es.closePopup=function(e){e=i.es.openedPopups[e];e&&e.dismiss("cancel")},i.es.printDiv=function(e){var s=document.getElementById(e).innerHTML,e=window.open("","_blank","width=300,height=300");e.document.open(),e.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="window.print()">'+s+"</body></html>"),e.document.close()},i.es.signUp=function(){signUp(i,s)},i.es.signIn=function(){signIn(i,s)},i.es.sendVerificationCode=function(e){sendVerificationCode(i,s,e)},i.es.alert=function(e){confirmationPopup(i,s,e,null)},i.es.resetPassword=function(){resetPassword(i,s)},i.es.getLoggedInUser=function(){startAjax(null,i),s.post(URL_LOGIN_USER).success(function(e,s,n,o){handleAjaxSuccess(null,i,e,s,n,o),e&&(i.es.loggedInUser=e.responseData,i.es.loggedInUser&&(i.es.loggedInUserId=i.es.loggedInUser.internalId,"ROLE_ADMIN"===i.es.loggedInUser.role&&i.es.setSelectedView("adminIndexView")),i.es.tempCustName=i.es.loggedInUserId,i.es.webhook="Success",i.es.uihook="walletSuccess")}).error(function(e,s,n,o){handleAjaxError(null,i,e,s,n,o)})},i.es.callIfLoggedInRole=function(t,r){startAjax(null,i),s.post(URL_LOGIN_ROLE).success(function(e,s,n,o){handleAjaxSuccess(null,i,e,s,n,o),e?(i.es.loggedInRole=e.responseData,i.es.loggedInRole==t&&r()):i.es.loggedInRole=""}).error(function(e,s,n,o){i.es.loggedInRole="",handleAjaxError(null,i,e,s,n,o)})},i.es.reloadPage=function(){r.location.reload()},i.es.manageMenuOnSelection=function(){isMobile()?i.es.showMenu=!1:i.es.showMenu=!0}}function startAjax(e,s){s.es.ajaxCount=s.es.ajaxCount+1}function handleAjaxSilent(e,s,n,o,t,r){s.es.ajaxCount=s.es.ajaxCount-1}function handleAjaxSuccess(e,s,n,o,t,r){s.es.ajaxCount=s.es.ajaxCount-1,n?s.es.addAlert(n):s.es.alerts.push({type:"danger",heading:"Some Error occured while processing. Apologies!",errorHtml:n})}function handleAjaxError(e,s,n,o,t,r){s.es.ajaxCount=s.es.ajaxCount-1,n?s.es.addAlert(n):s.es.alerts.push({type:"danger",heading:"Some Error occured while processing. Apologies!"})}function isMobile(){return!!window.matchMedia("(max-device-width: 1200px)").matches}var showImageInPopup=function(e,s,n,o){slides=[{image:o,caption:""}],showSlideshow(e,s,n,slides)},showAlbum=function(e,s,n){title=e.es.lg.Album+" : "+n.profileDetails.profileId,slides=n.profileDetails.profileImages,showSlideshow(e,s,title,slides)},showSlideshow=function(e,s,n,o){e.es.slideshow={},e.es.slideshow.interval=2e3,e.es.slideshow.title=n,e.es.slideshow.slides=o,e.es.openPopup("SLIDESHOW_POPUP")},isEmpty=function(e){return null==e||"undefined"==e||""==e.trim()},basicPopup=function(e,s,n,o,t){e.es.basicPopup={},e.es.basicPopup.title=n,e.es.basicPopup.msg=o,e.es.basicPopup.btnText=t,e.es.openPopup("BASIC_POPUP")},confirmationPopup=function(e,s,n,o){e.es.confirmPopup={},e.es.confirmPopup.msg=n,e.es.confirmPopup.okFunction=o,e.es.openPopup("CONFIRM_POPUP")},removeElementFromArray=function(e,s){e.splice(e.indexOf(s),1)},loadFile=function(e){var s=new FileReader;s.onload=function(){document.getElementById("output").src=s.result},s.readAsDataURL(e.target.files[0])},sendVerificationCode=function(t,e,s){s?(t.es.verificationCodeStatus=t.es.lg.SendingVerificationCode,startAjax("VERIFICATION_CODE",t),e.post(URL_VERIFICATION_CODE,s).success(function(e,s,n,o){handleAjaxSuccess("VERIFICATION_CODE",t,e,s,n,o),t.es.verificationCodeStatus=e.responseData}).error(function(e,s,n,o){handleAjaxError("VERIFICATION_CODE",t,e,s,n,o),t.es.verificationCodeStatus=e.responseData})):basicPopup(t,e,"Information","Please enter valid phone number","Ok")};function coreInitVar(e,s,n,o,t,r,i){e.es.ajaxCount=0,e.es.name="vinay",e.es.inProgress={},e.es.alerts=[],e.es.openedPopups={},e.es.confirmPopup={},e.es.signUpForm={},e.es.signInForm={},e.es.signUpForm.emailId="a@a.com",initDropDowns(e,s,n,o,t,r,i)}